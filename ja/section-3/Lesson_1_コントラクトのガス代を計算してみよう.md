
💰 プロジェクトのコストを見積もる
----

前回のレッスンでは、`NFTCollectible` コントラクトをデプロイした Rinkeby Test Network  はイーサリアムのメインネットを模倣していますが、実際の金銭的取引は行われません。

自分のプロジェクトをマネタイズしたい場合は、最終的にコントラクトをメインネットにデプロイする必要があります。

しかし、イーサリアムのメインネットは、ガス代（ブロックチェーンにデータを書き込むコスト）が高いことで有名です。

このレッスンでは、プロジェクトのデプロイと実行にかかるコストと、ユーザーがNFT を Mint するのにかかるコストの見積もり方について学んでいきます。

⛽️ ガス代とその価格
-------

ブロックチェーン上でデータの書き込み、または変更を行う際には、ガス代を支払う必要があります。

例）ブロックチェーン上でのデータの書き込み・変更

- ETH（またはその他の ERC20 トークン）の転送

- NFT の作成と転送

- スマートコントラクトのデプロイ

まず、スマートコントラクトをデプロイするコストを計算しましょう。

従来、スマートコントラクトの作成は、常にコストのかかるプロセスでした。

導入コストのガス量を確認するのは非常に簡単です。

Rinkeby にデプロイされたコントラクトの Etherscan ページに移動し、最初のトランザクションを確認しましょう。

-  `Create: NFTCollectible` と表記されているのコントラクトを確認してください。

![](https://i.imgur.com/EXHiOA6.png)

次に、コントラクトの作成に関連付けられている `Txn Hash` ハッシュをクリックしてください。

トランザクションページに進んだら、`Click to see More` をクリックしましょう。

![](https://i.imgur.com/SlUWuNA.png)


`Gas limit & Usage by Txn` を確認してください。

![](https://i.imgur.com/fE9bY8x.png)

`Gas limit & Usage by Txn` の値は、コントラクトのデプロイに使用されたガスの量です。

わたしのコントラクトを Rinkeby Test Network にデプロイするのに、約 386 万ガスが消費されました。

同じコントラクトをメインネットに展開すると、同じ量のガスを消費することになります。

テストネットとメインネットでは、ガスの価格が違います。

上図の `Gas Fee` を参照すると、わたしのコントラクトが Rinkeby Test Network にデプロイされたときのガス価格は、1.3 Gwei だったことがわかります。

- ガス価格: 1 単位のガスを消費するコスト

上記を踏まえ、コントラクトをメインネットにデプロイする際にかかるコストを計算していきましょう。

下記の式に、数字を当てはめていきます。

```
コスト = ガス価格（ Gas Price ） x 消費したガスの量（ Gas limit & Usage by Txn ）
```

ガス価格は、ネットワーク上のトラフィック量に応じて変動します。

ここで現在の ETH のガス価格を確認できます: https://etherscan.io/gastracker

これは、わたしがコントラクトをデプロイした際の ETH のガス価格です。

![](https://i.imgur.com/b9ieMyu.png)

上図からわかるように、**メインネットのガス価格は 約 40 Gwei であり、Rinkeby で消費されたガス価格よりも大幅に高くなっています。**

これで、ガスコストを見積もるのに必要なものがすべて揃いました。

わたしのコントラクトをメインネットにデプロイする際のコストの計算式は以下になります。

```
コスト= 40 Gwei （メインネットのガス価格） × 3,860,000（ 消費したガスの量 ） = 154,400,000 Gwei = 0.125 ETH
```

- Gwei から ETH の変換は [こちら](https://nomics.com/markets/gwei-gwei/eth-ethereum) のウェブサイトをお使いください。


**現在、わたしのコントラクトをイーサリアムのメインネットにデプロイするとしたら、0.125 ETH のコストがかかることがわかりました。**

今の時点（2022年2月）で、0.125 ETH を日本円に換算すると、約 4 万円になります。

数行のコードをブロックチェーンにアップロードするだけにしては、高い金額です。

もちろん、価格が下がったときにコントラクトをデプロイすることもできますが、イーサリアムのメインネット上でコントラクトを操作するのは、基本的に高額になる傾向があります。

👛 ユーザーが負担するコスト
---

ユーザーも、わたしたちのコントラクトから NFT を Mint する際にガス代を支払う必要があります。

それでは、NFT を 1 つ Mint するのにかかる費用を計算してみましょう。

もう一度、あなたのコントラクトアドレスを Etherscan で呼び出し、`Mint NFTs` と書かれているトランザクションの中身を見ていきましょう。

![](https://i.imgur.com/7V681K0.png)

メインネット上でわたしのコントラクトから NFT を 1 つ Mint する際のコストの計算式は以下になります。

```
コスト= 40 Gwei （メインネットのガス価格） × 386,338（ 消費したガスの量 ）/ 3（一度に Mint した NFT の数） = 5,151,173 Gwei = 0.004 ETH
```

- Gwei から ETH の変換は [こちら](https://nomics.com/markets/gwei-gwei/eth-ethereum) のウェブサイトをお使いください。


1 つの NFTを Mint するために発生するガス料金は 0.004 ETH（約 1500 円）です。

NFT を 0.01 ETH で販売した場合、ユーザーは追加で実際の NFT の約半分の金額をガス代に費やすことになります。

🟪 サイドチェーンを使ってガス代を削減する
---

ガス代を考慮すると、イーサリアム上で NFT を Mint し、取引することは、持続可能とは言い難い状況です。

このガス代問題を解決するために、様々なソリューションが存在します。

人気のあるソリューションの 1 つが Polygon サイドチェーンです。

✍️: サイドチェーンとは何か
> サイドチェーンは、メインチェーン（この場合はイーサリアム）と並行して動作します。
>
> サイドチェーンは、メインチェーンとの間で資産の転送を可能にし、その過程でスピードとスケーラビリティを劇的に向上させます。

前述の取引にどれだけのコストがかかるか、Polygon で試算してみよう。まず、[こちら](https://polygonscan.com/gastracker/
) で Polygon のガス価格を見てみましょう。

2022年2月現在、ガス料金は 3 Gwei 程度です。

![](https://i.imgur.com/5jw0Lvv.png)

これをベースに、Polygon のサイドチェーンでコントラクトをデプロイするコストを計算してみましょう。

```
コスト= 3 Gwei （メインネットのガス価格） × 3,860,000（ 消費したガスの量 ） = 11,580,000 Gwei = 0.009 ETH = 15.88 MATIC
```

- Gwei から MATIC の変換は [こちら](https://nomics.com/markets/gwei-gwei/matic-polygon) のウェブサイトをお使いください。

ガス料金は、現在の Polygon での価格を反映させたものに変更しました。さらに重要なことは、Polygon で使用している通貨が MATIC であることです。


現在（2022年2月）の MATIC の値段は 172 円です。

**したがって、同じスマートコントラクトを Polygon ネットワーク にデプロイするコストは、約 2700 円になります。**

	同じコントラクトを Polygon ネットワーク にデプロイするコスト

	= 172 円（ 1 MATIC あたりの金額 ） × 15.88 MATIC（コントラクトのデプロイコスト）

	≒ 2700 円

**メインネットの価格（ 4 万円）と比べると、だいぶコストが削減できます。**

🔮 Polygon の有用性
---

Polygon を使う大きなメリットは、**EVM に対応している**ことです。

- EVM について詳しくは、[こちら](https://kasobu.com/articles/ethereum-virtual-machine) をご覧ください。

「EVM に対応している」とは、**イーサリアムと同じツールを使ってスマートコントラクトをデプロイすることができる**、ということです。

Polygon のもう一つの特徴として、非常に有利なのは、世界最大の NFT マーケットプレイスである OpenSea にサポートされていることです。

ユーザーは、イーサリアムの NFT とほぼ同じ方法で、OpenSea 上で Polygon ネットワークにデプロイされた NFT を取引することができます。


🙋‍♂️ 質問する
-------------------------------------------
ここまでの作業で何かわからないことがある場合は、Discordの `#section-2-help` で質問をしてください。

ヘルプをするときのフローが円滑になるので、エラーレポートには下記の3点を記載してください✨
```
1. 何をしようとしていたか
2. エラー文をコピー&ペースト
3. エラー画面のスクリーンショット
```

----
次のレッスンに進みましょう🎉
